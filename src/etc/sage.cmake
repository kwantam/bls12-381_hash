if (NOT SAGEMATH)
    if (DEFINED ENV{SAGEMATH})
        set (SAGEMATH_TMP $ENV{SAGEMATH})
    else (NOT DEFINED ENV{SAGEMATH})
        set (SAGEMATH_TMP sage)
    endif (DEFINED ENV{SAGEMATH})

    execute_process (COMMAND ${SAGEMATH_TMP} -version RESULT_VARIABLE SAGEMATH_RESULT OUTPUT_VARIABLE SAGEMATH_VERSION)
    if (${SAGEMATH_RESULT} EQUAL 0)
        string (REGEX MATCH "version [0-9]+\.[0-9]+" SAGEMATH_VERSION ${SAGEMATH_VERSION})
        message (STATUS "Found sagemath " ${SAGEMATH_VERSION})
        set (SAGEMATH ${SAGEMATH_TMP} CACHE STRING "sagemath executable name")
    endif (${SAGEMATH_RESULT} EQUAL 0)
endif (NOT SAGEMATH)
